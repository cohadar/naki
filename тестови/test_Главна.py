from наки.__main__ import Главна
from наки.вежбање import Вежбање
from наки.команда import КОМАНДА_ФЕЈЛ, КОМАНДА_ПЛУС1, КОМАНДА_ПЛУС2, КОМАНДА_ЕДИТУЈ, КОМАНДА_ОТВОРИ_УРЛ
from наки.команда import КОМАНДА_ПРЕКИД, КОМАНДА_ПРЕПОЛОВИ, КОМАНДА_ИЗБАЦИ_ПРОМАШЕНЕ
from наки.команда import Команда
from наки.терминал import Терминал
from тест import СировиТерминал, ТестШпил

ОДРАЂЕНО = 10000


def тв(име, лен):
    return Вежбање(ТестШпил(име, лен))


def тест_вежбања():
    return [
        тв('aaa', 0),
        тв('bbb', 5),
        тв('ccc', 10),
        тв('ddd', 15),
    ]


def главна(*команде):
    return Главна(Терминал(СировиТерминал([КОМАНДА_ПРЕКИД])), тест_вежбања())()


def test_изађи_одмах():
    рез = главна(КОМАНДА_ПРЕКИД)
    assert рез == тест_вежбања()


# def test_преполови():
#     рез = Главна(ТестТерминал([КОМАНДА_ПРЕПОЛОВИ, КОМАНДА_ПРЕКИД]), тест_вежбања())()
#     for a, б in zip(рез, тест_вежбања()):
#         assert a.име_шпила() == б.име_шпила()
#         assert len(a) == (len(б) + 1) // 2


# def test_избаци_промашене():
#     рез = Главна(ТестТерминал([КОМАНДА_ИЗБАЦИ_ПРОМАШЕНЕ, КОМАНДА_ПРЕКИД]), тест_вежбања())()
#     for a, б in zip(рез, тест_вежбања()):
#         assert a.име_шпила() == б.име_шпила()
#         assert len(a) == max(0, len(б) - 2)


# def test_одради_два():
#     рез = Главна(ТестТерминал([Команда(2), Команда(3), КОМАНДА_ПРЕКИД]), тест_вежбања())()
#     assert рез == [
#         тв('aaa', 0),
#         тв('bbb', ОДРАЂЕНО),
#         тв('ccc', ОДРАЂЕНО),
#         тв('ddd', 15),
#     ]


# def test_мешовито():
#     рез = Главна(ТестТерминал(['i', 1, 'p', 'i', 3, 'k']), тест_вежбања())()
#     assert рез == [
#         тв('aaa', ОДРАЂЕНО),
#         тв('bbb', 2),
#         тв('ccc', ОДРАЂЕНО),
#         тв('ddd', 7),
#     ]
